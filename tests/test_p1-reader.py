from app import calc_crc


def test_calc_crc():
    telegram = [
        b"/XMX5LGF0010453336756\r\n",
        b"\r\n",
        b"1-3:0.2.8(50)\r\n",
        b"0-0:1.0.0(210110164031W)\r\n",
        b"0-0:96.1.1(4530303532303035333333363735363139)\r\n",
        b"1-0:1.8.1(001390.459*kWh)\r\n",
        b"1-0:1.8.2(001083.563*kWh)\r\n",
        b"1-0:2.8.1(000502.043*kWh)\r\n",
        b"1-0:2.8.2(001072.631*kWh)\r\n",
        b"0-0:96.14.0(0001)\r\n",
        b"1-0:1.7.0(00.205*kW)\r\n",
        b"1-0:2.7.0(00.000*kW)\r\n",
        b"0-0:96.7.21(00015)\r\n",
        b"0-0:96.7.9(00007)\r\n",
        b"1-0:99.97.0(4)(0-0:96.7.19)(000101010000W)(0000000426*s)(000101010000W)(0000098573*s)(000101010000W)(0000000559*s)(200127202136W)(0000000328*s)\r\n",
        b"1-0:32.32.0(00017)\r\n",
        b"1-0:52.32.0(00016)\r\n",
        b"1-0:72.32.0(00024)\r\n",
        b"1-0:32.36.0(00000)\r\n",
        b"1-0:52.36.0(00000)\r\n",
        b"1-0:72.36.0(00000)\r\n",
        b"0-0:96.13.0()\r\n",
        b"1-0:32.7.0(230.7*V)\r\n",
        b"1-0:52.7.0(228.9*V)\r\n",
        b"1-0:72.7.0(230.9*V)\r\n",
        b"1-0:31.7.0(000*A)\r\n",
        b"1-0:51.7.0(000*A)\r\n",
        b"1-0:71.7.0(001*A)\r\n",
        b"1-0:21.7.0(00.031*kW)\r\n",
        b"1-0:41.7.0(00.006*kW)\r\n",
        b"1-0:61.7.0(00.169*kW)\r\n",
        b"1-0:22.7.0(00.000*kW)\r\n",
        b"1-0:42.7.0(00.000*kW)\r\n",
        b"1-0:62.7.0(00.000*kW)\r\n",
        b"0-1:24.1.0(003)\r\n",
        b"0-1:96.1.0(4730303339303031393332313736323139)\r\n",
        b"0-1:24.2.1(210110164008W)(01319.033*m3)\r\n",
        b"!1058\r\n",
    ]
    crc = calc_crc(telegram)
    assert crc == "0x1058"
